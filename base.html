<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style.css" />
  <title>Tugas AI</title>
</head>

<body>
  <nav>
    <ul>
      <li><a href="gejala-penyakit.html">Daftar Gejala dan Penyakit</a></li>
      <li><a href="base.html" class="active">Diagnosa</a></li>
    </ul>
  </nav>

  <div class="gejala-group-container">
    <div class="gejala-kolom">
      <h3>Telinga</h3>
      <div class="gejala" data-index="19">Tuli</div>
      <div class="gejala" data-index="30">Radang gendang telinga</div>
      <div class="gejala" data-index="33">Telinga berdenging</div>
      <div class="gejala" data-index="34">Telinga terasa penuh</div>
      <div class="gejala" data-index="36">Tubuh tak seimbang</div>
    </div>

    <div class="gejala-kolom">
      <h3>Hidung</h3>
      <div class="gejala" data-index="4">Hidung tersumbat</div>
      <div class="gejala" data-index="7">Hidung meler</div>
      <div class="gejala" data-index="10">Selaput lendir merah dan bengkak</div>
      <div class="gejala" data-index="14">Pendarahan hidung</div>
      <div class="gejala" data-index="24">Infeksi sinus</div>
    </div>

    <div class="gejala-kolom">
      <h3>Tenggorokan</h3>
      <div class="gejala" data-index="3">Batuk</div>
      <div class="gejala" data-index="15">Suara serak</div>
      <div class="gejala" data-index="21">Air liur menetes</div>
      <div class="gejala" data-index="29">Perubahan suara</div>
      <div class="gejala" data-index="35">Tenggorokan gatal</div>
    </div>

    <div class="gejala-kolom">
      <h3>Umum</h3>
      <div class="gejala" data-index="0">Demam</div>
      <div class="gejala" data-index="1">Sakit kepala</div>
      <div class="gejala" data-index="8">Letih dan lesu</div>
      <div class="gejala" data-index="9">Mual dan muntah</div>
      <div class="gejala" data-index="17">Dahi sakit</div>
      <div class="gejala" data-index="22">Berat badan turun</div>
      <div class="gejala" data-index="23">Bunyi nafas abnormal</div>
      <div class="gejala" data-index="28">Perubahan kulit</div>
      <div class="gejala" data-index="31">Sakit gigi</div>
    </div>

    <div class="gejala-kolom">
      <h3>Nyeri</h3>
      <div class="gejala" data-index="2">Nyeri saat bicara atau menelan</div>
      <div class="gejala" data-index="5">Nyeri telinga</div>
      <div class="gejala" data-index="6">Nyeri tenggorokan</div>
      <div class="gejala" data-index="12">Nyeri leher</div>
      <div class="gejala" data-index="25">Nyeri antar mata</div>
      <div class="gejala" data-index="26">Nyeri pinggir hidung</div>
      <div class="gejala" data-index="27">Nyeri wajah</div>
    </div>

    <div class="gejala-kolom">
      <h3>Tidak Umum</h3>
      <div class="gejala" data-index="11">Ada benjolan di leher</div>
      <div class="gejala" data-index="13">Pembengkakan kelenjar getah bening</div>
      <div class="gejala" data-index="16">Bola mata bergerak tanpa sadar</div>
      <div class="gejala" data-index="18">Leher bengkak</div>
      <div class="gejala" data-index="20">Ada yang tumbuh di mulut</div>
      <div class="gejala" data-index="32">Serangan vertigo</div>
    </div>
  </div>

  <button id="diagnosaBtn">Diagnosa Sekarang</button>

  <div id="hasil"></div>

  <script>
    const daftarGejala = [
      "Demam", "Sakit kepala", "Nyeri saat bicara atau menelan", "Batuk", "Hidung tersumbat",
      "Nyeri telinga", "Nyeri tenggorokan", "Hidung meler", "Letih dan lesu", "Mual dan muntah",
      "Selaput lendir merah dan bengkak", "Ada benjolan di leher", "Nyeri leher",
      "Pembengkakan kelenjar getah bening", "Pendarahan hidung", "Suara serak",
      "Bola mata bergerak tanpa sadar", "Dahi sakit", "Leher bengkak", "Tuli",
      "Ada yang tumbuh di mulut", "Air liur menetes", "Berat badan turun",
      "Bunyi nafas abnormal", "Infeksi sinus", "Nyeri antara mata", "Nyeri pinggir hidung",
      "Nyeri wajah", "Perubahan kulit", "Perubahan suara", "Radang gendang telinga",
      "Sakit gigi", "Serangan vertigo", "Telinga berdenging", "Telinga terasa penuh",
      "Tenggorokan gatal", "Tubuh tak seimbang"
    ];

    const daftarPenyakit = [
    { nama: "Contract Ulcers", gejala: [2, 15] },
        { nama: "Abses Parafaringeal", gejala: [2, 18] },
        { nama: "Abses Peritonsiler", gejala: [0, 1, 6, 13, 15, 21] },
        { nama: "Barotitis Media", gejala: [1, 5] },
        { nama: "Deviasi Septum", gejala: [0, 4, 5, 14, 24, 28] },
        { nama: "Faringitis", gejala: [0, 2, 6, 12, 13] },
        { nama: "Kanker Laring", gejala: [2, 3, 6, 12, 15, 22, 23] },
        { nama: "Kanker Leher dan Kepala", gejala: [2, 11, 14, 20, 29, 30] },
        { nama: "Kanker Leher Metastatik", gejala: [11] },
        { nama: "Kanker Nasofaring", gejala: [4, 14] },
        { nama: "Kanker Tonsil", gejala: [6, 11] },
        { nama: "Laringitis", gejala: [0, 2, 13, 18, 36] },
        { nama: "Neuronitis Vestibularis", gejala: [9, 16] },
        { nama: "Otosklerosis", gejala: [19, 34] },
        { nama: "Otitis Media Akut", gejala: [0, 5, 9, 31] },
        { nama: "Meniere", gejala: [5, 9, 33, 35] },
        { nama: "Tonsilitis", gejala: [0, 1, 2, 3, 6, 9] },
        { nama: "Tumor Syaraf Pendengaran", gejala: [1, 19, 37] },
        { nama: "Vertigo Postular", gejala: [16] },
        { nama: "Sinusitis Maksilaris", gejala: [0, 1, 3, 4, 7, 8, 10, 27, 32] },
        { nama: "Sinusitis Frontalis", gejala: [0, 1, 3, 4, 7, 8, 10, 17] },
        { nama: "Sinusitis Etmoidal", gejala: [0, 1, 3, 4, 7, 8, 10, 17, 25, 26] },
        { nama: "Sinusitis Sfenoidal", gejala: [0, 1, 3, 4, 5, 7, 8, 10, 11] },
        { nama: "Perut", gejala: [0, 1, 2, 3] }
    ];

    const gejalaTerpilih = new Set();
    const hasil = document.getElementById("hasil");
    const diagnosaBtn = document.getElementById("diagnosaBtn");

    document.querySelectorAll('.gejala').forEach(el => {
      el.addEventListener('click', () => {
        const index = parseInt(el.dataset.index);
        if (gejalaTerpilih.has(index)) {
          gejalaTerpilih.delete(index);
          el.classList.remove('selected');
        } else {
          gejalaTerpilih.add(index);
          el.classList.add('selected');
        }
      });
    });

    diagnosaBtn.addEventListener("click", () => {
      hasil.innerHTML = "";
      const hasilDiagnosa = daftarPenyakit
        .map(penyakit => {
          const cocok = penyakit.gejala.filter(g => gejalaTerpilih.has(g));
          const persentase = (cocok.length / penyakit.gejala.length) * 100;
          return { nama: penyakit.nama, cocok, persentase };
        })
        .filter(p => p.cocok.length > 0)
        .sort((a, b) => b.persentase - a.persentase);

      if (hasilDiagnosa.length === 0) {
        hasil.innerHTML = "<p><strong>Tidak ada penyakit yang cocok ditemukan.</strong></p>";
      } else {
        hasil.innerHTML = "<h3>Hasil Diagnosa:</h3>";
        hasilDiagnosa.forEach(p => {
          const namaGejala = p.cocok.map(i => daftarGejala[i]).join(", ");
          hasil.innerHTML += `
            <div>
              <strong>${p.nama}</strong><br/>
              Cocok dengan gejala: ${namaGejala}<br/>
              Persentase kecocokan: ${p.persentase.toFixed(2)}%
              <hr/>
            </div>`;
        });
      }

      gejalaTerpilih.clear();
      document.querySelectorAll('.gejala').forEach(el => el.classList.remove('selected'));
    });
  </script>
</body>
</html>